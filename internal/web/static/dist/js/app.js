"use strict";$(".report").length&&(window.MessagePie=function(t){Highcharts.chart("message-pie",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Messages Sent"},tooltip:{pointFormat:"{series.name}: <b>{point.y} Messages ({point.percentage:.0f}%)</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>",style:{}}}},series:[{name:"Messages",colorByPoint:!0,data:t}]})},window.WordPie=function(t){Highcharts.chart("words-pie",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Words Sent"},tooltip:{pointFormat:"{series.name}: <b>{point.y} Words ({point.percentage:.0f}%)</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>",style:{}}}},series:[{name:"Words",colorByPoint:!0,data:t}]})},window.MonthlyMessages=function(t,e){Highcharts.chart("monthly-messages",{chart:{type:"column"},title:{text:"Messages sent per month"},xAxis:{categories:t,crosshair:!0},yAxis:{min:0,title:{text:"Messages Sent"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y} messages</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:e})}),$(".izimodal").length&&($("#report-modal").iziModal(),$('input[type="file"]').on("change",function(t){var e=$(this).val(),a=e.split("."),i=a[a.length-1].toUpperCase();return console.log(i),"txt"==i.toLowerCase()?($(".upload-btn-wrapper .btn").addClass("btn--fill"),$(".upload-btn-wrapper .btn").text(e.split("\\").pop()),!0):(alert("Chats must be a .txt file!"),!1)}),$("#report-modal .btn--submit").on("click",function(t){var e=!0;if(t.preventDefault(),$(":input[required]:visible").each(function(){if(""==$(this).val())return alert("Please ensure you've selected a chat and inputted your email."),e=!1}),e){var a=new FormData($("#report-modal form")[0]);$("form").hide(),$(".btn--submit").hide(),$(".loading").addClass("show"),$.ajax({type:"post",url:"/report",processData:!1,contentType:!1,data:a,success:function(t,e){console.log(t),$(".circle-loader").addClass("load-complete"),$(".checkmark").show()},error:function(t,e){console.log(t,e)}})}}));var emoji_regex=new RegExp(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|[\ud83c[\ude50\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g);if(window.is_emoji=function(t){return emoji_regex.test(t)},$(".report").length&&Highcharts.setOptions({lang:{thousandsSep:","},colors:["#25D366","#075E54","#128C7E","#4263d3","#343435","#34B7F1","#29ad5a"]}),$(".report").length&&particlesJS("report_background",{particles:{number:{value:380,density:{enable:!0,value_area:5e3}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:4,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}),$(".report").length)var report=new Vue({el:".report__details",data:{total_messages:data.report_analytics.MessagesSent,total_words:data.report_analytics.WordsSent,hour_map:data.report_analytics.HourList,participants:data.report_analytics.Participants},computed:{avg_messages_per_day:function(){var t=0;for(var e in this.participants)this.participants[e].MonthList.length>t&&(t=this.participants[e].MonthList.length);return Math.floor(this.total_messages/t/30)},active_months:function(){var t=0;for(var e in this.participants)this.participants[e].MonthList.length>t&&(t=this.participants[e].MonthList.length);return t},busiest_hour:function(){return this.hour_map.reduce(function(t,e){return t.Messages>e.Messages?t:e})},messages_pie:function(){var t=[];for(var e in this.participants)t.push([e,this.participants[e].MessagesSent]);return t},word_pie:function(){var t=[];for(var e in this.participants)t.push([e,this.participants[e].WordsSent]);return t},months:function(){var e={};for(var t in this.participants)void 0!==e.MonthList?this.participants[t].MonthList.length>e.MonthList.length&&(e=this.participants[t]):e=this.participants[t];return Object.keys(e.MonthList).map(function(t){return e.MonthList[t].Month})},messages_per_month:function(){var t=[];for(var e in this.participants){var a={};for(var i in a.name=e,a.data=[],t.push(a),this.participants[e].MonthList)a.data.push([this.months.indexOf(this.participants[e].MonthList[i].Month),this.participants[e].MonthList[i].Messages])}return t}},methods:{get_top_emoji:function(t){for(var e in t)if(is_emoji(t[e].Word))return console.log("Found most used emoji:"+t[e].Word),t[e].Word}},mounted:function(){MessagePie(this.messages_pie),WordPie(this.word_pie),MonthlyMessages(this.months,this.messages_per_month)}});